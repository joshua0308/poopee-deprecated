{"ast":null,"code":"import _regeneratorRuntime from \"/Users/joshuakim/poopee/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/joshuakim/poopee/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/joshuakim/poopee/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/joshuakim/poopee/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/joshuakim/poopee/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/joshuakim/poopee/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/joshuakim/poopee/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/joshuakim/poopee/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/joshuakim/poopee/frontend2/src/components/test/MobileView.js\";\nimport React, { Component } from 'react';\nimport Axios from 'axios';\nimport Map from '../common/Map';\nimport mapStyles from '../../assets/mapStyles.json';\nimport zoomInMarkerIcon from '../../assets/zoomInMarker.png';\nimport zoomOutMarkerIcon from '../../assets/zoomOutMarker.png';\nimport InfoCard from '../common/InfoCard';\nimport NavigationIcon from '@material-ui/icons/Navigation';\nimport SideNavBar from '../common/SideNavBar';\nimport Fab from '@material-ui/core/Fab';\nimport sideNavBarIcon from '../../assets/sidenavbar.png';\nimport Sidebar from 'react-sidebar'; // import ReactSwipe from 'react-swipe';\n\nvar refs = {\n  map: undefined\n}; // const mapHeight = window.innerHeight;\n\nvar MobileView =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MobileView, _Component);\n\n  function MobileView() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MobileView);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MobileView)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      sidebarOpen: false,\n      zoom: null,\n      indexBefore: 0,\n      index: 0,\n      userLatLng: {\n        lat: null,\n        lng: null\n      },\n      currentLatLng: {\n        lat: 40.7308,\n        lng: -73.997541\n      },\n      isCardShown: false,\n      rerender: null,\n      panes: [],\n      mapHeight: window.innerHeight,\n      mapWidth: window.innerWidth,\n      markerIcon: zoomInMarkerIcon,\n      restrooms: [],\n      user: {\n        isLoggedIn: false,\n        data: [{\n          index: 1,\n          liked: false,\n          disliked: false,\n          likedColor: '#ffffff',\n          dislikedColor: '#ffffff'\n        }]\n      }\n    };\n\n    _this.handleFindMyLocation = function () {\n      if (_this.state.userLatLng.lat == null) {\n        alert('Please give it a few seconds...\\n\\n*Make sure you enabled location service in your settings*');\n      } else {\n        _this.setState({\n          currentLatLng: _this.state.userLatLng\n        });\n      }\n    };\n\n    _this.onSetSidebarOpen = function (open) {\n      _this.setState({\n        sidebarOpen: open\n      });\n    };\n\n    _this.handleMapMounted = function (ref) {\n      refs.map = ref;\n    };\n\n    _this.handleMarkerClick = function (restroom) {\n      console.log(restroom);\n\n      var restrooms = _toConsumableArray(_this.state.restrooms);\n\n      var index = restrooms.indexOf(restroom);\n      var indexBefore = _this.state.index; // let index = restroom.id;\n\n      restrooms[indexBefore].selected = false;\n      restrooms[index].selected = true;\n\n      _this.setState({\n        indexBefore: indexBefore\n      });\n\n      _this.setState({\n        index: index\n      });\n\n      _this.setState({\n        isCardShown: true\n      });\n\n      console.log(index);\n    };\n\n    _this.handleZoomChanged = function () {\n      var markerIcon = refs.map.getZoom() > 14 ? zoomInMarkerIcon : zoomOutMarkerIcon;\n\n      _this.setState({\n        zoom: refs.map.getZoom()\n      });\n\n      _this.setState({\n        markerIcon: markerIcon\n      });\n    };\n\n    _this.handleCenterChanged = function () {\n      var center = refs.map.getCenter();\n      var currentLatLng = {\n        lat: center.lat(),\n        lng: center.lng()\n      };\n\n      _this.setState({\n        currentLatLng: currentLatLng\n      }); // console.log(userLatLng);\n\n    };\n\n    _this.createPanes = function (restrooms) {\n      var panes = Array.apply(null, Array(restrooms.length)).map(function (_, i) {\n        return React.createElement(\"div\", {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            padding: '5px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, React.createElement(InfoCard, {\n          className: InfoCard,\n          restroom: restrooms[i],\n          index: i // onLikeButtonClicked={() => {\n          //   console.log('Like button');\n          // }}\n          // onDislikeButtonClicked={() => {\n          //   console.log('Dislike button');\n          // }}\n          ,\n          user: _this.state.user,\n          onCloseButton: function onCloseButton() {\n            console.log('Close button');\n\n            _this.setState({\n              isCardShown: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        })));\n      });\n      return panes;\n    };\n\n    return _this;\n  }\n\n  _createClass(MobileView, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var userLatLng, _ref, restrooms, panes;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // find the height of the user's window\n                if (navigator.geolocation) {\n                  console.log('Inside if statement');\n                  navigator.geolocation.getCurrentPosition(function (position) {\n                    console.log('Inside getCurrentPosition');\n                    userLatLng = {\n                      lat: position.coords.latitude,\n                      lng: position.coords.longitude\n                    };\n                    console.log('lat: ' + userLatLng.lat, 'lng: ' + userLatLng.lng);\n\n                    _this2.setState({\n                      userLatLng: userLatLng\n                    });\n                  });\n                } // import restrooms from backend in mongodb\n\n\n                _context.prev = 1;\n                _context.next = 4;\n                return Axios.get('https://mysterious-earth-50755.herokuapp.com/api/restrooms');\n\n              case 4:\n                _ref = _context.sent;\n                restrooms = _ref.data;\n                this.setState({\n                  restrooms: restrooms\n                }); // create panes with restroom data\n\n                panes = this.createPanes(restrooms);\n                this.setState({\n                  panes: panes\n                }); // console.log(panes);\n\n                _context.next = 14;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](1);\n                console.error(_context.t0);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 11]]);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      // var sideNavBarStyle = ;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"mapDiv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(Map, {\n        defaultOptions: {\n          disableDefaultUI: true,\n          gestureHandling: 'greedy',\n          styles: mapStyles\n        },\n        defaultZoom: 16,\n        center: {\n          lng: this.state.currentLatLng.lng,\n          lat: this.state.currentLatLng.lat\n        },\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyA1qg3OHSHEjNHsL6hg6A-1NX-5lsCFquw&v=3.exp&libraries=geometry,drawing,places\",\n        loadingElement: React.createElement(\"div\", {\n          style: {\n            height: \"100%\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }),\n        containerElement: React.createElement(\"div\", {\n          style: {\n            height: \"\".concat(this.state.mapHeight, \"px\")\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }),\n        mapElement: React.createElement(\"div\", {\n          style: {\n            height: \"100%\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }),\n        onMapMounted: this.handleMapMounted,\n        restrooms: this.state.restrooms,\n        markerIcon: this.state.markerIcon,\n        onZoomChanged: this.handleZoomChanged,\n        onCenterChanged: this.handleCenterChanged,\n        onMarkerClick: this.handleMarkerClick,\n        userLatLng: this.state.userLatLng,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      })), React.createElement(Sidebar, {\n        sidebar: React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }, \"Sidebar content\"),\n        open: this.state.sidebarOpen,\n        onSetOpen: this.onSetSidebarOpen,\n        styles: {\n          sidebar: {\n            background: 'white'\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(Fab, {\n        variant: \"extended\",\n        \"aria-label\": \"Delete\",\n        style: {\n          position: 'absolute',\n          padding: 0,\n          top: '1em',\n          right: '1em',\n          zIndex: 1,\n          backgroundColor: '#FFD600',\n          color: '#5D4037'\n        },\n        onClick: function onClick() {\n          _this3.handleFindMyLocation(true);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: sideNavBarIcon,\n        style: {\n          width: '48px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"buttonBoxDiv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(Fab, {\n        variant: \"extended\",\n        \"aria-label\": \"Delete\",\n        style: {\n          position: 'absolute',\n          padding: 0,\n          top: '6em',\n          right: '1em',\n          zIndex: 1,\n          backgroundColor: '#FFD600',\n          color: '#5D4037',\n          transform: 'rotate(-45deg)'\n        },\n        onClick: this.handleFindMyLocation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(NavigationIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      })), this.state.isCardShown && React.createElement(\"div\", {\n        style: {\n          margin: '0 auto',\n          width: '100%',\n          position: 'absolute',\n          bottom: '0px',\n          zIndex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, this.state.panes[this.state.index])));\n    }\n  }]);\n\n  return MobileView;\n}(Component);\n\nexport default MobileView;","map":{"version":3,"sources":["/Users/joshuakim/poopee/frontend2/src/components/test/MobileView.js"],"names":["React","Component","Axios","Map","mapStyles","zoomInMarkerIcon","zoomOutMarkerIcon","InfoCard","NavigationIcon","SideNavBar","Fab","sideNavBarIcon","Sidebar","refs","map","undefined","MobileView","state","sidebarOpen","zoom","indexBefore","index","userLatLng","lat","lng","currentLatLng","isCardShown","rerender","panes","mapHeight","window","innerHeight","mapWidth","innerWidth","markerIcon","restrooms","user","isLoggedIn","data","liked","disliked","likedColor","dislikedColor","handleFindMyLocation","alert","setState","onSetSidebarOpen","open","handleMapMounted","ref","handleMarkerClick","restroom","console","log","indexOf","selected","handleZoomChanged","getZoom","handleCenterChanged","center","getCenter","createPanes","Array","apply","length","_","i","padding","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","get","error","disableDefaultUI","gestureHandling","styles","height","sidebar","background","top","right","zIndex","backgroundColor","color","width","transform","margin","bottom"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Axios from 'axios';\nimport Map from '../common/Map';\nimport mapStyles from '../../assets/mapStyles.json';\nimport zoomInMarkerIcon from '../../assets/zoomInMarker.png';\nimport zoomOutMarkerIcon from '../../assets/zoomOutMarker.png';\nimport InfoCard from '../common/InfoCard';\nimport NavigationIcon from '@material-ui/icons/Navigation';\nimport SideNavBar from '../common/SideNavBar';\nimport Fab from '@material-ui/core/Fab';\nimport sideNavBarIcon from '../../assets/sidenavbar.png';\nimport Sidebar from 'react-sidebar';\n\n// import ReactSwipe from 'react-swipe';\n\nvar refs = {\n  map: undefined\n};\n\n// const mapHeight = window.innerHeight;\n\nclass MobileView extends Component {\n  state = {\n    sidebarOpen: false,\n    zoom: null,\n    indexBefore: 0,\n    index: 0,\n    userLatLng: { lat: null, lng: null },\n    currentLatLng: { lat: 40.7308, lng: -73.997541 },\n    isCardShown: false,\n    rerender: null,\n    panes: [],\n    mapHeight: window.innerHeight,\n    mapWidth: window.innerWidth,\n    markerIcon: zoomInMarkerIcon,\n    restrooms: [],\n    user: {\n      isLoggedIn: false,\n      data: [\n        {\n          index: 1,\n          liked: false,\n          disliked: false,\n          likedColor: '#ffffff',\n          dislikedColor: '#ffffff'\n        }\n      ]\n    }\n  };\n\n  async componentDidMount() {\n    // find the height of the user's window\n    let userLatLng;\n    if (navigator.geolocation) {\n      console.log('Inside if statement');\n      navigator.geolocation.getCurrentPosition(position => {\n        console.log('Inside getCurrentPosition');\n        userLatLng = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n        console.log('lat: ' + userLatLng.lat, 'lng: ' + userLatLng.lng);\n        this.setState({ userLatLng });\n      });\n    }\n    // import restrooms from backend in mongodb\n\n    try {\n      // get restroom data from backend\n      const { data: restrooms } = await Axios.get(\n        'https://mysterious-earth-50755.herokuapp.com/api/restrooms'\n      );\n      this.setState({ restrooms });\n\n      // create panes with restroom data\n      const panes = this.createPanes(restrooms);\n      this.setState({ panes });\n      // console.log(panes);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  handleFindMyLocation = () => {\n    if (this.state.userLatLng.lat == null) {\n      alert(\n        'Please give it a few seconds...\\n\\n*Make sure you enabled location service in your settings*'\n      );\n    } else {\n      this.setState({ currentLatLng: this.state.userLatLng });\n    }\n  };\n\n  onSetSidebarOpen = open => {\n    this.setState({ sidebarOpen: open });\n  };\n\n  handleMapMounted = ref => {\n    refs.map = ref;\n  };\n\n  handleMarkerClick = restroom => {\n    console.log(restroom);\n    let restrooms = [...this.state.restrooms];\n    let index = restrooms.indexOf(restroom);\n    let indexBefore = this.state.index;\n    // let index = restroom.id;\n\n    restrooms[indexBefore].selected = false;\n    restrooms[index].selected = true;\n    this.setState({ indexBefore });\n    this.setState({ index });\n    this.setState({ isCardShown: true });\n    console.log(index);\n  };\n\n  handleZoomChanged = () => {\n    let markerIcon =\n      refs.map.getZoom() > 14 ? zoomInMarkerIcon : zoomOutMarkerIcon;\n    this.setState({ zoom: refs.map.getZoom() });\n    this.setState({ markerIcon });\n  };\n\n  handleCenterChanged = () => {\n    let center = refs.map.getCenter();\n    let currentLatLng = { lat: center.lat(), lng: center.lng() };\n    this.setState({ currentLatLng });\n    // console.log(userLatLng);\n  };\n\n  createPanes = restrooms => {\n    const panes = Array.apply(null, Array(restrooms.length)).map((_, i) => {\n      return (\n        <div key={i}>\n          <div style={{ padding: '5px' }}>\n            <InfoCard\n              className={InfoCard}\n              restroom={restrooms[i]}\n              index={i}\n              // onLikeButtonClicked={() => {\n              //   console.log('Like button');\n              // }}\n              // onDislikeButtonClicked={() => {\n              //   console.log('Dislike button');\n              // }}\n              user={this.state.user}\n              onCloseButton={() => {\n                console.log('Close button');\n                this.setState({ isCardShown: false });\n              }}\n            />\n          </div>\n        </div>\n      );\n    });\n\n    return panes;\n  };\n\n  render() {\n    // var sideNavBarStyle = ;\n\n    return (\n      <div>\n        <div className='mapDiv'>\n          <Map\n            defaultOptions={{\n              disableDefaultUI: true,\n              gestureHandling: 'greedy',\n              styles: mapStyles\n            }}\n            defaultZoom={16}\n            center={{\n              lng: this.state.currentLatLng.lng,\n              lat: this.state.currentLatLng.lat\n            }}\n            googleMapURL='https://maps.googleapis.com/maps/api/js?key=AIzaSyA1qg3OHSHEjNHsL6hg6A-1NX-5lsCFquw&v=3.exp&libraries=geometry,drawing,places'\n            loadingElement={<div style={{ height: `100%` }} />}\n            containerElement={\n              <div style={{ height: `${this.state.mapHeight}px` }} />\n            }\n            mapElement={<div style={{ height: `100%` }} />}\n            onMapMounted={this.handleMapMounted}\n            restrooms={this.state.restrooms}\n            markerIcon={this.state.markerIcon}\n            onZoomChanged={this.handleZoomChanged}\n            onCenterChanged={this.handleCenterChanged}\n            onMarkerClick={this.handleMarkerClick}\n            userLatLng={this.state.userLatLng}\n          />\n        </div>\n        <Sidebar\n          sidebar={<b>Sidebar content</b>}\n          open={this.state.sidebarOpen}\n          onSetOpen={this.onSetSidebarOpen}\n          styles={{ sidebar: { background: 'white' } }}\n        >\n          <div>\n            <Fab\n              variant='extended'\n              aria-label='Delete'\n              style={{\n                position: 'absolute',\n                padding: 0,\n                top: '1em',\n                right: '1em',\n                zIndex: 1,\n                backgroundColor: '#FFD600',\n                color: '#5D4037'\n              }}\n              onClick={() => {\n                this.handleFindMyLocation(true);\n              }}\n            >\n              <img src={sideNavBarIcon} style={{ width: '48px' }} />\n            </Fab>\n          </div>\n        </Sidebar>\n        <div className='buttonBoxDiv'>\n          <Fab\n            variant='extended'\n            aria-label='Delete'\n            style={{\n              position: 'absolute',\n              padding: 0,\n              top: '6em',\n              right: '1em',\n              zIndex: 1,\n              backgroundColor: '#FFD600',\n              color: '#5D4037',\n              transform: 'rotate(-45deg)'\n            }}\n            onClick={this.handleFindMyLocation}\n          >\n            <NavigationIcon />\n          </Fab>\n          {this.state.isCardShown && (\n            <div\n              style={{\n                margin: '0 auto',\n                width: '100%',\n                position: 'absolute',\n                bottom: '0px',\n                zIndex: 1\n              }}\n            >\n              {this.state.panes[this.state.index]}\n              {/* <ReactSwipe\n              ref={reactSwipe => (this.reactSwipe = reactSwipe)}\n              className='mySwipe'\n              swipeOptions={{\n                startSlide: this.state.index,\n                disableScroll: false,\n                continuous: true,\n                widthOfSiblingSlidePreview: 10\n                // transitionEnd: (index, element) =>\n                //   this.showSelectedMarker(index)\n              }}\n            >\n              {this.state.panes}\n            </ReactSwipe> */}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MobileView;\n"]},"metadata":{},"sourceType":"module"}